USE `大学教务管理系统`;

-- 暂时关闭外键约束检查
SET FOREIGN_KEY_CHECKS = 0;

-- 清空所有表并重置自增计数器 (TRUNCATE 会重置序号)
TRUNCATE TABLE `选课成绩表`;
TRUNCATE TABLE `教务处理明细表`;
TRUNCATE TABLE `教务表`;
TRUNCATE TABLE `课程表`;
TRUNCATE TABLE `学生表`;
TRUNCATE TABLE `教师表`;
TRUNCATE TABLE `系表`;
TRUNCATE TABLE `学院表`;
-- 如果你还有系统用户表，也一并清空
TRUNCATE TABLE `系统用户表`;

-- 重新开启外键约束检查
SET FOREIGN_KEY_CHECKS = 1;

-- 1. 基础组织架构
INSERT INTO `学院表` (`学院名称`, `学院简称`, `负责人`, `联系电话`, `备注`) VALUES 
('计算机学院', '计科院', '张远德', '010-66660001', '重点建设学院'),
('经济管理学院', '经管院', '李晓华', '010-66660002', '校企合作示范院');

-- 2. 教学系部 (关联学院1和2)
INSERT INTO `系表` (`系名称`, `系简称`, `所属学院序号`, `负责人`, `联系电话`) VALUES 
('软件工程系', '软件系', 1, '王建国', '010-66661001'),
('人工智能系', 'AI系', 1, '赵万全', '010-66661002'),
('会计学系', '会计系', 2, '孙丽丽', '010-66661003');

-- 3. 师资力量 (包含行政教务与授课教师)
INSERT INTO `教师表` (`教师姓名`, `性别`, `职称`, `职级`, `所属系序号`, `办公地点`) VALUES 
('王建国', '男', '教授', '正高级', 1, '办公楼401'), -- 序号1
('陈诚', '男', '讲师', '中级', 1, '办公楼303'),   -- 序号2
('周敏', '女', '助教', '初级', 1, '行政楼205');   -- 序号3 (设为教务老师)

-- 4. 教务岗位配置
INSERT INTO `教务表` (`教务老师序号`, `分管系序号`, `负责教务内容`, `办公地点`) VALUES 
(3, 1, '学籍管理与成绩审核', '行政楼205'); -- 序号1

-- 5. 学生信息 (分属不同系部)
INSERT INTO `学生表` (`学生姓名`, `性别`, `学号`, `所属系序号`, `班级`, `学生年级`, `入学年份`) VALUES 
('张小明', '男', '2025010101', 1, '软工2501', '大一', 2025), -- 序号1
('李华', '女', '2025010102', 1, '软工2501', '大一', 2025);   -- 序号2

-- 6. 课程设置 (关联授课教师)
INSERT INTO `课程表` (`课程名称`, `课程简称`, `授课教师序号`, `学分`, `课时`, `课程类型`) VALUES 
('Python程序设计', 'Python', 2, 4, 64, '必修课'), -- 序号1
('数据库系统', 'DB', 1, 3, 48, '必修课');          -- 序号2

-- 7. 业务数据：选课与初始成绩
INSERT INTO `选课成绩表` (`学生序号`, `课程序号`, `成绩`, `选课学期`) VALUES 
(1, 1, 85.00, '2025-2026学年第一学期'), -- 张小明 Python 85分
(1, 2, NULL, '2025-2026学年第一学期'),  -- 张小明 数据库 待录入
(2, 1, 92.50, '2025-2026学年第一学期'); -- 李华 Python 92.5分

-- 8. 业务数据：教务审批流程
INSERT INTO `教务处理明细表` (`所属教务序号`, `关联学生序号`, `关联课程序号`, `教务处理类型`, `教务处理内容`, `处理状态`) VALUES 
(1, 1, 2, '成绩录入', '录入张小明数据库课程期末成绩', '待处理'),
(1, 2, 1, '选课审核', '审核李华跨系选课申请', '审核中');

-- 9. 系统账户 (确保 Flask 登录可用)
-- 如果之前 TRUNCATE 了系统用户表，请执行此处
INSERT INTO `系统用户表` (`用户名`, `密码`, `角色`) VALUES 
('admin', '123456', 'admin'),
('jwls_01', '123456', 'jwls'),
('stu_01', '123456', 'stu');